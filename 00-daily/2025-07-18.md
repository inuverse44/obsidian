---
template: Daily
date: 2025-07-18
day_of_week: é‡‘æ›œæ—¥
tags:
  - Shinise
  - è² è·æ¤œè¨¼
  - å–¶æ¥­åœ¨åº«
status: pending
source:
---
# ä»Šé€±ã®äºˆå®š
- [x] è¾°å¤«ã•ã‚“ã«èª¬æ˜ã™ã‚‹ç”¨ã®ã€Shiniseé–‹ç™ºã§ã‚„ã£ãŸè²¢çŒ®ã¾ã¨ã‚
- [ ] åŒã˜ã‚¹ãƒ‘ãƒ³åã‚’æŒã¡ã€ã‹ã¤å…¨ã¦ã®æœŸé–“å†…ã®ã‚¹ãƒ‘ãƒ³IDã§é›†è¨ˆã‚’ã¨ã‚Šã€å‡¦ç†æ™‚é–“ã‚’æ¸¬å®šã™ã‚‹å¿…è¦ã‚ã‚Šã€‚
	- [x] Google Traceã«ã¤ã„ã¦èª¿æŸ»
	- [x] è¨­è¨ˆ
	- [x] å®Ÿè£…
	- [ ] å‹•ä½œãƒã‚§ãƒƒã‚¯
- [ ] ã‚¹ãƒ‘ãƒ³åå˜ä½ã§å‡¦ç†æ™‚é–“ã‚’è¨ˆæ¸¬ã—ã€ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’å ±å‘Š
- [ ] Gatlingã«ã‚ˆã‚‹ç¢ºèª
	- [x] SalesContinuousSimulation
	- [ ] LargeFileSimulation
	- [ ] BurstSimulation
- [x] å®šæœŸçš„ã«stock-conversion-serviceã‚„new-stock-serviceãŒæ­»ã‚“ã§ã„ã‚‹ã“ã¨ã‚’é€šçŸ¥ã™ã‚‹ã‚„ã¤ã‚’ä½œã‚‹
- [ ] GraphQL APIè² è·ãƒ†ã‚¹ãƒˆç”¨Locustãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ

## è‡ªå·±å­¦ç¿’
- [ ] OpenTelemetryã‚’èª­ç ´ã™ã‚‹
- [ ] è¨˜äº‹ã‚’ï¼‘ã¤æ›¸ã
---
# ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯ (Tasks)
- new-stock-serviceå˜ä½“ã§è² è·ã‚’ã‹ã‘ã‚‰ã‚Œã‚‹æ–¹æ³•ã®èª¿æŸ»
- GraphQL APIè² è·ãƒ†ã‚¹ãƒˆç”¨Locustãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ
	- O(100)åº—èˆ—ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã‚·ãƒŠãƒªã‚ªã‚’ä½œæˆã™ã‚‹ï¼ˆåº—èˆ—ç•ªå·å‰²ã‚ŠæŒ¯ã£ã¦ï¼‰

---

# æ—¥è¨˜ãƒ»ãƒ¡ãƒ¢ (Journal / Notes)


## æœç¤¼
- inunakiè¨­è¨ˆé•ã„ã€èªè­˜ã®ãšã‚Œã§ãŒã£ã‹ã‚Š
- åŸºæœ¬è¨­è¨ˆ
	- immutable
	- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãªå‡¦ç†
- éå»è¨€ã£ãŸã“ã¨ã‚’æ€ã„å‡ºã›ã‚‹ã‹
- è¨­è¨ˆã‚„æ€æƒ³ã‚’ã©ã†ã™ã¹ãã‹ã€‚æœ€åˆã€åŸç†ãƒ»åŸå‰‡ã‚’å›ºã‚ã‚‹ã¹ã
- å…·ä½“çš„ãªäº‹ä¾‹
	- æ˜¨æ—¥
- inunakiã«å¯¾ã—ã¦ã€ä½•ã®ãƒ‡ãƒ¼ã‚¿ã‚’å…¬é–‹ã™ã‚‹ã®ã‹ï¼Ÿ
	- å·®åˆ†ãƒ­ã‚°ã‚’åŒæœŸã™ã‚‹
	- è¦‹ã‚‹å´ãŒã©ã†ã‚„ã£ã¦ã¿ã‚‹ã‹
	- 

## Large-file-size simulation

å®Ÿæ–½äºˆå®šãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºè¨­è¨ˆ

- 1KB
	- purchase/purchase0575_20250611141634.gz
- 5KB
	- purchase/purchase0573_20250611141634.gz 
- 10KB (=1MB)
	- purchase-event/purchase0633_20250430174149.gz


```
{"name": "init-stock/init_stock0002_20250610000001.gz", "bucket": "shinise-dev-stockmiddleware-import"}
```

base64ã®ä¸­èº«
- 1KB
```
{"name": "purchase/purchase0575_20250611141634.gz", "bucket": "shinise-dev-stockmiddleware-import"}
```

```
eyJuYW1lIjogInB1cmNoYXNlL3B1cmNoYXNlMDU3NV8yMDI1MDYxMTE0MTYzNC5neiIsICJidWNrZXQiOiAic2hpbmlzZS1kZXYtc3RvY2ttaWRkbGV3YXJlLWltcG9ydCJ9
```



- 5KB
```
{"name": "purchase/purchase0573_20250611141634.gz", "bucket": "shinise-dev-stockmiddleware-import"}
```

```
eyJuYW1lIjogInB1cmNoYXNlL3B1cmNoYXNlMDU3M18yMDI1MDYxMTE0MTYzNC5neiIsICJidWNrZXQiOiAic2hpbmlzZS1kZXYtc3RvY2ttaWRkbGV3YXJlLWltcG9ydCJ9
```


- 10KB

```
{"name": "purchase-event/purchase0633_20250430174149.gz", "bucket": "shinise-dev-stockmiddleware-import"}
```

```
eyJuYW1lIjogInB1cmNoYXNlLWV2ZW50L3B1cmNoYXNlMDYzM18yMDI1MDQzMDE3NDE0OS5neiIsICJidWNrZXQiOiAic2hpbmlzZS1kZXYtc3RvY2ttaWRkbGV3YXJlLWltcG9ydCJ9
```
## ç¾çŠ¶ã®ä¸å®‰
- salesã®ã‚µãƒ¼ãƒ“ã‚¹ã®è² è·æ¤œè¨¼ãŒã„ã‚‹ï¼Ÿ
- salesã«OpenTelemetryã®ãƒˆãƒ¬ãƒ¼ã‚¹ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆä¼æ’­ã®è¨­å®šãŒãªã•ã‚Œã¦ã„ã‚‹ã‹ï¼Ÿ
- RabbitMQå˜ä½“ã®è² è·ã‚’ã‹ã‘ã‚‰ã‚Œã‚‹æ–¹æ³•ãŒå­˜åœ¨ã—ãªã„ã€‚
	- Processã«ã‚ˆã£ã¦ã€RabbitMQã®è¨­å®šãŒé«˜åº¦ã«éš è”½ã•ã‚Œã¦ã„ã‚‹



```mermaid
sequenceDiagram
    participant User as "User/å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ "
    participant UsecaseDispatcher
    participant ProcessDispatcher
    participant ProcessCallable
    participant ExecutionLogAccess
    participant QueueClient

    User->>UsecaseDispatcher: ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè¡Œè¦æ±‚ (Usecase.handle)
    UsecaseDispatcher->>ExecutionLogAccess: logStartUsecase (ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹é–‹å§‹ãƒ­ã‚°)
    UsecaseDispatcher->>ProcessDispatcher: (WRITE) publishProcess(metadata, input)
    ProcessDispatcher->>QueueClient: publish(queue, headers, bytes)
    Note over QueueClient: ã‚­ãƒ¥ãƒ¼æŠ•å…¥
    QueueClient->>ProcessDispatcher: consume (queueã‹ã‚‰å—ä¿¡)
    ProcessDispatcher->>ExecutionLogAccess: logStartProcess (ãƒ—ãƒ­ã‚»ã‚¹é–‹å§‹ãƒ­ã‚°)
    ProcessDispatcher->>ProcessCallable: call(metadata, input)
    ProcessCallable-->>ProcessDispatcher: output
    ProcessDispatcher->>ExecutionLogAccess: logFinishProcess (ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†ãƒ­ã‚°)
    alt æ¬¡ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒå­˜åœ¨
        ProcessDispatcher->>ProcessDispatcher: publishProcess(metadata.next(), output)
        ProcessDispatcher->>QueueClient: publish(queue, headers, bytes)
        QueueClient->>ProcessDispatcher: consume (æ¬¡ãƒ—ãƒ­ã‚»ã‚¹)
    else æœ€çµ‚ãƒ—ãƒ­ã‚»ã‚¹
        ProcessDispatcher->>UsecaseDispatcher: success(metadata, output)
        UsecaseDispatcher->>ExecutionLogAccess: logFinishUsecase (ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹çµ‚äº†ãƒ­ã‚°)
        UsecaseDispatcher->>ActionExecutor: callNextAction (å¿…è¦ã«å¿œã˜ã¦)
    end
    Note over UsecaseDispatcher: (READã®å ´åˆã¯runUnqueueProcessesã§ç›´åˆ—å®Ÿè¡Œ)
```




---

```mermaid
sequenceDiagram
    participant User as "User/å¤–éƒ¨ã‚·ã‚¹ãƒ†ãƒ "
    participant UsecaseDispatcher
    participant ProcessDispatcher
    participant ProcessCallable
    participant ExecutionLogAccess
    participant QueueClient

    User->>UsecaseDispatcher: ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å®Ÿè¡Œè¦æ±‚ (Usecase.handle)
    UsecaseDispatcher->>ExecutionLogAccess: logStartUsecase (ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹é–‹å§‹ãƒ­ã‚°)
    UsecaseDispatcher->>ProcessDispatcher: (WRITE) publishProcess(metadata, input)
    ProcessDispatcher->>QueueClient: publish(queue, headers, bytes)
    Note over QueueClient: ã‚­ãƒ¥ãƒ¼æŠ•å…¥
    QueueClient->>ProcessDispatcher: consume (queueã‹ã‚‰å—ä¿¡)
    ProcessDispatcher->>ExecutionLogAccess: logStartProcess (ãƒ—ãƒ­ã‚»ã‚¹é–‹å§‹ãƒ­ã‚°)
    ProcessDispatcher->>ProcessCallable: call(metadata, input)
    ProcessCallable-->>ProcessDispatcher: output
    ProcessDispatcher->>ExecutionLogAccess: logFinishProcess (ãƒ—ãƒ­ã‚»ã‚¹çµ‚äº†ãƒ­ã‚°)
    alt æ¬¡ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒå­˜åœ¨
        ProcessDispatcher->>ProcessDispatcher: publishProcess(metadata.next(), output)
        ProcessDispatcher->>QueueClient: publish(queue, headers, bytes)
        QueueClient->>ProcessDispatcher: consume (æ¬¡ãƒ—ãƒ­ã‚»ã‚¹)
    else æœ€çµ‚ãƒ—ãƒ­ã‚»ã‚¹
        ProcessDispatcher->>UsecaseDispatcher: success(metadata, output)
        UsecaseDispatcher->>ExecutionLogAccess: logFinishUsecase (ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹çµ‚äº†ãƒ­ã‚°)
        UsecaseDispatcher->>ActionExecutor: callNextAction (å¿…è¦ã«å¿œã˜ã¦)
    end
    Note over UsecaseDispatcher: (READã®å ´åˆã¯runUnqueueProcessesã§ç›´åˆ—å®Ÿè¡Œ)
```


---

# é–¢é€£ãƒªãƒ³ã‚¯ãƒ»ãƒãƒ¼ãƒˆ (Links)
- ğŸ“‚ Projects: [[MOC]]
- ğŸ“‚ Weekly Review: [[01-weekly/2025-W29 Weekly Review]]
- ãã®ä»–: 

---

# ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ
## **Dataview**

#### *Daily*
```dataview
TABLE date AS æ—¥ä»˜, day_of_week AS æ›œæ—¥, status AS ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
FROM "00-daily"
WHERE template = "Daily" AND status = "pending"
SORT date ASC
```

#### *Inbox*
```dataview
TABLE date AS æ—¥ä»˜, status AS ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
FROM "10-inbox"
WHERE status = "pending"
SORT date ASC
```

Task
```dataview
table
  task.text     as "ã‚¿ã‚¹ã‚¯å†…å®¹",
  task.due      as "æœŸé™"
from "00-daily"
flatten file.tasks as task
where task.completed = false
sort task.due asc
```
